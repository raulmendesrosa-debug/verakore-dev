<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verakore Analytics Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .analytics-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .analytics-metric {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .analytics-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .kpi-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #17a2b8;
        }
        .kpi-card.traffic {
            border-left-color: #28a745;
        }
        .kpi-card.business {
            border-left-color: #fd7e14;
        }
        .kpi-card.performance {
            border-left-color: #6f42c1;
        }
        .conversion-funnel {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .funnel-step {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            text-align: center;
        }
        .real-time-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.9rem;
            z-index: 1000;
        }
        .real-time-indicator.offline {
            background: #dc3545;
        }
    </style>
</head>
<body>
    <div class="real-time-indicator" id="real-time-status">
        <i class="fas fa-circle"></i> Real-time Analytics
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center my-4">
                    <i class="fas fa-chart-line"></i> Verakore Analytics Dashboard
                </h1>
            </div>
        </div>

        <!-- Key Metrics Overview -->
        <div class="row">
            <div class="col-12">
                <h3><i class="fas fa-tachometer-alt"></i> Key Metrics Overview</h3>
            </div>
            <div class="col-md-3">
                <div class="analytics-card">
                    <div class="analytics-metric" id="total-page-views">--</div>
                    <div class="analytics-label">Total Page Views</div>
                    <div class="analytics-label" id="page-views-trend">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="analytics-card">
                    <div class="analytics-metric" id="unique-visitors">--</div>
                    <div class="analytics-label">Unique Visitors</div>
                    <div class="analytics-label" id="visitors-trend">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="analytics-card">
                    <div class="analytics-metric" id="conversion-rate">--</div>
                    <div class="analytics-label">Conversion Rate</div>
                    <div class="analytics-label" id="conversion-trend">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="analytics-card">
                    <div class="analytics-metric" id="avg-session-duration">--</div>
                    <div class="analytics-label">Avg Session Duration</div>
                    <div class="analytics-label" id="duration-trend">Loading...</div>
                </div>
            </div>
        </div>

        <!-- Charts -->
        <div class="row">
            <div class="col-md-6">
                <div class="chart-container">
                    <h5><i class="fas fa-chart-area"></i> Traffic Trends</h5>
                    <canvas id="trafficChart"></canvas>
                </div>
            </div>
            <div class="col-md-6">
                <div class="chart-container">
                    <h5><i class="fas fa-chart-pie"></i> Traffic Sources</h5>
                    <canvas id="sourcesChart"></canvas>
                </div>
            </div>
        </div>

        <!-- KPI Cards -->
        <div class="row">
            <div class="col-md-4">
                <h3><i class="fas fa-globe"></i> Website Traffic KPIs</h3>
                <div id="traffic-kpis">
                    <div class="kpi-card traffic">
                        <h6><i class="fas fa-eye"></i> Page Views</h6>
                        <p><strong>Today:</strong> <span id="today-views">--</span></p>
                        <p><strong>This Week:</strong> <span id="week-views">--</span></p>
                        <p><strong>This Month:</strong> <span id="month-views">--</span></p>
                    </div>
                    <div class="kpi-card traffic">
                        <h6><i class="fas fa-users"></i> Unique Visitors</h6>
                        <p><strong>Today:</strong> <span id="today-visitors">--</span></p>
                        <p><strong>This Week:</strong> <span id="week-visitors">--</span></p>
                        <p><strong>This Month:</strong> <span id="month-visitors">--</span></p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <h3><i class="fas fa-briefcase"></i> Business KPIs</h3>
                <div id="business-kpis">
                    <div class="kpi-card business">
                        <h6><i class="fas fa-handshake"></i> Lead Generation</h6>
                        <p><strong>This Week:</strong> <span id="week-leads">--</span></p>
                        <p><strong>This Month:</strong> <span id="month-leads">--</span></p>
                        <p><strong>Conversion Rate:</strong> <span id="lead-conversion">--</span></p>
                    </div>
                    <div class="kpi-card business">
                        <h6><i class="fas fa-envelope"></i> Contact Submissions</h6>
                        <p><strong>This Week:</strong> <span id="week-contacts">--</span></p>
                        <p><strong>This Month:</strong> <span id="month-contacts">--</span></p>
                        <p><strong>Response Rate:</strong> <span id="contact-response">--</span></p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <h3><i class="fas fa-tachometer-alt"></i> Performance KPIs</h3>
                <div id="performance-kpis">
                    <div class="kpi-card performance">
                        <h6><i class="fas fa-clock"></i> Page Load Time</h6>
                        <p><strong>Average:</strong> <span id="avg-load-time">--</span></p>
                        <p><strong>Mobile:</strong> <span id="mobile-load-time">--</span></p>
                        <p><strong>Desktop:</strong> <span id="desktop-load-time">--</span></p>
                    </div>
                    <div class="kpi-card performance">
                        <h6><i class="fas fa-star"></i> Core Web Vitals</h6>
                        <p><strong>LCP:</strong> <span id="lcp-score">--</span></p>
                        <p><strong>FID:</strong> <span id="fid-score">--</span></p>
                        <p><strong>CLS:</strong> <span id="cls-score">--</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conversion Funnel -->
        <div class="row">
            <div class="col-12">
                <h3><i class="fas fa-funnel-dollar"></i> Conversion Funnel</h3>
                <div class="conversion-funnel">
                    <div class="row">
                        <div class="col-md-2">
                            <div class="funnel-step">
                                <h6>Website Visit</h6>
                                <div class="analytics-metric">1,250</div>
                                <small>100%</small>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="funnel-step">
                                <h6>Page View</h6>
                                <div class="analytics-metric">980</div>
                                <small>78%</small>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="funnel-step">
                                <h6>Service Interest</h6>
                                <div class="analytics-metric">245</div>
                                <small>20%</small>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="funnel-step">
                                <h6>Contact Form</h6>
                                <div class="analytics-metric">89</div>
                                <small>7%</small>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="funnel-step">
                                <h6>Lead Generated</h6>
                                <div class="analytics-metric">34</div>
                                <small>3%</small>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="funnel-step">
                                <h6>Customer</h6>
                                <div class="analytics-metric">12</div>
                                <small>1%</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Activity -->
        <div class="row">
            <div class="col-md-6">
                <h3><i class="fas fa-broadcast-tower"></i> Real-time Activity</h3>
                <div class="chart-container">
                    <canvas id="realtimeChart"></canvas>
                </div>
            </div>
            <div class="col-md-6">
                <h3><i class="fas fa-map-marker-alt"></i> Geographic Distribution</h3>
                <div class="chart-container">
                    <canvas id="geoChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Device & Browser Analytics -->
        <div class="row">
            <div class="col-md-6">
                <h3><i class="fas fa-mobile-alt"></i> Device Analytics</h3>
                <div class="chart-container">
                    <canvas id="deviceChart"></canvas>
                </div>
            </div>
            <div class="col-md-6">
                <h3><i class="fas fa-globe"></i> Browser Analytics</h3>
                <div class="chart-container">
                    <canvas id="browserChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Analytics Dashboard JavaScript
        class AnalyticsDashboard {
            constructor() {
                this.charts = {};
                this.realTimeData = [];
                this.init();
            }

            init() {
                this.loadData();
                this.setupCharts();
                this.startRealTimeUpdates();
                this.startAutoRefresh();
            }

            async loadData() {
                try {
                    // Simulate API call - replace with actual endpoint
                    const response = await fetch('/api/analytics-data');
                    const data = await response.json();
                    this.updateDashboard(data);
                } catch (error) {
                    console.error('Error loading analytics data:', error);
                    this.loadSampleData();
                }
            }

            loadSampleData() {
                // Sample data for demonstration
                const sampleData = {
                    overview: {
                        totalPageViews: 15420,
                        uniqueVisitors: 3240,
                        conversionRate: 3.2,
                        avgSessionDuration: '2m 45s'
                    },
                    traffic: {
                        today: { views: 245, visitors: 89 },
                        week: { views: 1680, visitors: 456 },
                        month: { views: 6420, visitors: 1234 }
                    },
                    business: {
                        leads: { week: 23, month: 89 },
                        contacts: { week: 45, month: 156 },
                        conversion: '3.2%',
                        response: '87%'
                    },
                    performance: {
                        avgLoadTime: '1.8s',
                        mobileLoadTime: '2.4s',
                        desktopLoadTime: '1.2s',
                        lcp: '2.1s',
                        fid: '85ms',
                        cls: '0.08'
                    },
                    trends: [
                        { date: '2024-01-01', pageViews: 120, visitors: 45 },
                        { date: '2024-01-02', pageViews: 135, visitors: 52 },
                        { date: '2024-01-03', pageViews: 142, visitors: 48 },
                        { date: '2024-01-04', pageViews: 158, visitors: 61 },
                        { date: '2024-01-05', pageViews: 168, visitors: 67 }
                    ],
                    sources: {
                        direct: 45,
                        search: 30,
                        social: 15,
                        referral: 10
                    },
                    devices: {
                        desktop: 60,
                        mobile: 35,
                        tablet: 5
                    },
                    browsers: {
                        chrome: 65,
                        safari: 20,
                        firefox: 10,
                        edge: 5
                    },
                    geo: {
                        'United States': 45,
                        'United Kingdom': 20,
                        'Canada': 15,
                        'Germany': 10,
                        'Other': 10
                    }
                };

                this.updateDashboard(sampleData);
            }

            updateDashboard(data) {
                this.updateOverview(data.overview);
                this.updateKPIs(data);
                this.updateCharts(data);
            }

            updateOverview(overview) {
                document.getElementById('total-page-views').textContent = overview.totalPageViews.toLocaleString();
                document.getElementById('unique-visitors').textContent = overview.uniqueVisitors.toLocaleString();
                document.getElementById('conversion-rate').textContent = overview.conversionRate + '%';
                document.getElementById('avg-session-duration').textContent = overview.avgSessionDuration;
            }

            updateKPIs(data) {
                // Traffic KPIs
                document.getElementById('today-views').textContent = data.traffic.today.views;
                document.getElementById('week-views').textContent = data.traffic.week.views;
                document.getElementById('month-views').textContent = data.traffic.month.views;
                document.getElementById('today-visitors').textContent = data.traffic.today.visitors;
                document.getElementById('week-visitors').textContent = data.traffic.week.visitors;
                document.getElementById('month-visitors').textContent = data.traffic.month.visitors;

                // Business KPIs
                document.getElementById('week-leads').textContent = data.business.leads.week;
                document.getElementById('month-leads').textContent = data.business.leads.month;
                document.getElementById('lead-conversion').textContent = data.business.conversion;
                document.getElementById('week-contacts').textContent = data.business.contacts.week;
                document.getElementById('month-contacts').textContent = data.business.contacts.month;
                document.getElementById('contact-response').textContent = data.business.response;

                // Performance KPIs
                document.getElementById('avg-load-time').textContent = data.performance.avgLoadTime;
                document.getElementById('mobile-load-time').textContent = data.performance.mobileLoadTime;
                document.getElementById('desktop-load-time').textContent = data.performance.desktopLoadTime;
                document.getElementById('lcp-score').textContent = data.performance.lcp;
                document.getElementById('fid-score').textContent = data.performance.fid;
                document.getElementById('cls-score').textContent = data.performance.cls;
            }

            setupCharts() {
                this.setupTrafficChart();
                this.setupSourcesChart();
                this.setupDeviceChart();
                this.setupBrowserChart();
                this.setupGeoChart();
                this.setupRealtimeChart();
            }

            setupTrafficChart() {
                const ctx = document.getElementById('trafficChart').getContext('2d');
                this.charts.traffic = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [
                            {
                                label: 'Page Views',
                                data: [],
                                borderColor: '#667eea',
                                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'Unique Visitors',
                                data: [],
                                borderColor: '#764ba2',
                                backgroundColor: 'rgba(118, 75, 162, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }

            setupSourcesChart() {
                const ctx = document.getElementById('sourcesChart').getContext('2d');
                this.charts.sources = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Direct', 'Search', 'Social', 'Referral'],
                        datasets: [{
                            data: [45, 30, 15, 10],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#f093fb',
                                '#f5576c'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }

            setupDeviceChart() {
                const ctx = document.getElementById('deviceChart').getContext('2d');
                this.charts.device = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['Desktop', 'Mobile', 'Tablet'],
                        datasets: [{
                            data: [60, 35, 5],
                            backgroundColor: [
                                '#28a745',
                                '#17a2b8',
                                '#ffc107'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }

            setupBrowserChart() {
                const ctx = document.getElementById('browserChart').getContext('2d');
                this.charts.browser = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Chrome', 'Safari', 'Firefox', 'Edge'],
                        datasets: [{
                            data: [65, 20, 10, 5],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#f093fb',
                                '#f5576c'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }

            setupGeoChart() {
                const ctx = document.getElementById('geoChart').getContext('2d');
                this.charts.geo = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['US', 'UK', 'Canada', 'Germany', 'Other'],
                        datasets: [{
                            data: [45, 20, 15, 10, 10],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#f093fb',
                                '#f5576c',
                                '#6c757d'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 50
                            }
                        }
                    }
                });
            }

            setupRealtimeChart() {
                const ctx = document.getElementById('realtimeChart').getContext('2d');
                this.charts.realtime = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Active Users',
                            data: [],
                            borderColor: '#28a745',
                            backgroundColor: 'rgba(40, 167, 69, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        animation: {
                            duration: 0
                        }
                    }
                });
            }

            updateCharts(data) {
                if (data.trends) {
                    this.charts.traffic.data.labels = data.trends.map(t => t.date);
                    this.charts.traffic.data.datasets[0].data = data.trends.map(t => t.pageViews);
                    this.charts.traffic.data.datasets[1].data = data.trends.map(t => t.visitors);
                    this.charts.traffic.update();
                }

                if (data.sources) {
                    this.charts.sources.data.datasets[0].data = [
                        data.sources.direct,
                        data.sources.search,
                        data.sources.social,
                        data.sources.referral
                    ];
                    this.charts.sources.update();
                }

                if (data.devices) {
                    this.charts.device.data.datasets[0].data = [
                        data.devices.desktop,
                        data.devices.mobile,
                        data.devices.tablet
                    ];
                    this.charts.device.update();
                }

                if (data.browsers) {
                    this.charts.browser.data.datasets[0].data = [
                        data.browsers.chrome,
                        data.browsers.safari,
                        data.browsers.firefox,
                        data.browsers.edge
                    ];
                    this.charts.browser.update();
                }

                if (data.geo) {
                    this.charts.geo.data.datasets[0].data = [
                        data.geo['United States'],
                        data.geo['United Kingdom'],
                        data.geo['Canada'],
                        data.geo['Germany'],
                        data.geo['Other']
                    ];
                    this.charts.geo.update();
                }
            }

            startRealTimeUpdates() {
                setInterval(() => {
                    const now = new Date();
                    const timeLabel = now.toLocaleTimeString();
                    const activeUsers = Math.floor(Math.random() * 20) + 5;

                    this.realTimeData.push({ time: timeLabel, users: activeUsers });
                    
                    if (this.realTimeData.length > 20) {
                        this.realTimeData.shift();
                    }

                    this.charts.realtime.data.labels = this.realTimeData.map(d => d.time);
                    this.charts.realtime.data.datasets[0].data = this.realTimeData.map(d => d.users);
                    this.charts.realtime.update('none');

                    // Update real-time indicator
                    document.getElementById('real-time-status').innerHTML = 
                        `<i class="fas fa-circle"></i> ${activeUsers} Active Users`;
                }, 5000);
            }

            startAutoRefresh() {
                setInterval(() => {
                    this.loadData();
                }, 60000); // Refresh every minute
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new AnalyticsDashboard();
        });
    </script>
</body>
</html>
