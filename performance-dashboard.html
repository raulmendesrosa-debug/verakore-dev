<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verakore Performance Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .status-good { color: #28a745; }
        .status-warning { color: #ffc107; }
        .status-danger { color: #dc3545; }
        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .alert-card {
            border-left: 4px solid #dc3545;
            background: #f8d7da;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }
        .recommendation-card {
            border-left: 4px solid #17a2b8;
            background: #d1ecf1;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center my-4">
                    <i class="fas fa-tachometer-alt"></i> Verakore Performance Dashboard
                </h1>
            </div>
        </div>

        <!-- Core Web Vitals -->
        <div class="row">
            <div class="col-12">
                <h3><i class="fas fa-heartbeat"></i> Core Web Vitals</h3>
            </div>
            <div class="col-md-3">
                <div class="metric-card">
                    <div class="metric-value" id="lcp-value">--</div>
                    <div class="metric-label">Largest Contentful Paint</div>
                    <div class="metric-label" id="lcp-status">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card">
                    <div class="metric-value" id="fid-value">--</div>
                    <div class="metric-label">First Input Delay</div>
                    <div class="metric-label" id="fid-status">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card">
                    <div class="metric-value" id="cls-value">--</div>
                    <div class="metric-label">Cumulative Layout Shift</div>
                    <div class="metric-label" id="cls-status">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card">
                    <div class="metric-value" id="fcp-value">--</div>
                    <div class="metric-label">First Contentful Paint</div>
                    <div class="metric-label" id="fcp-status">Loading...</div>
                </div>
            </div>
        </div>

        <!-- Performance Scores -->
        <div class="row">
            <div class="col-12">
                <h3><i class="fas fa-chart-line"></i> Performance Scores</h3>
            </div>
            <div class="col-md-3">
                <div class="metric-card">
                    <div class="metric-value" id="performance-score">--</div>
                    <div class="metric-label">Performance</div>
                    <div class="metric-label" id="performance-status">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card">
                    <div class="metric-value" id="accessibility-score">--</div>
                    <div class="metric-label">Accessibility</div>
                    <div class="metric-label" id="accessibility-status">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card">
                    <div class="metric-value" id="best-practices-score">--</div>
                    <div class="metric-label">Best Practices</div>
                    <div class="metric-label" id="best-practices-status">Loading...</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-card">
                    <div class="metric-value" id="seo-score">--</div>
                    <div class="metric-label">SEO</div>
                    <div class="metric-label" id="seo-status">Loading...</div>
                </div>
            </div>
        </div>

        <!-- Charts -->
        <div class="row">
            <div class="col-md-6">
                <div class="chart-container">
                    <h5><i class="fas fa-chart-area"></i> Performance Trends</h5>
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
            <div class="col-md-6">
                <div class="chart-container">
                    <h5><i class="fas fa-chart-pie"></i> Resource Distribution</h5>
                    <canvas id="resourceChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Alerts and Recommendations -->
        <div class="row">
            <div class="col-md-6">
                <h3><i class="fas fa-exclamation-triangle"></i> Active Alerts</h3>
                <div id="alerts-container">
                    <div class="alert alert-info">Loading alerts...</div>
                </div>
            </div>
            <div class="col-md-6">
                <h3><i class="fas fa-lightbulb"></i> Optimization Recommendations</h3>
                <div id="recommendations-container">
                    <div class="alert alert-info">Loading recommendations...</div>
                </div>
            </div>
        </div>

        <!-- Performance Budget -->
        <div class="row">
            <div class="col-12">
                <h3><i class="fas fa-wallet"></i> Performance Budget</h3>
                <div class="chart-container">
                    <canvas id="budgetChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Performance Dashboard JavaScript
        class PerformanceDashboard {
            constructor() {
                this.charts = {};
                this.init();
            }

            init() {
                this.loadData();
                this.setupCharts();
                this.startAutoRefresh();
            }

            async loadData() {
                try {
                    // Simulate API call - replace with actual endpoint
                    const response = await fetch('/api/performance-data');
                    const data = await response.json();
                    this.updateDashboard(data);
                } catch (error) {
                    console.error('Error loading performance data:', error);
                    this.loadSampleData();
                }
            }

            loadSampleData() {
                // Sample data for demonstration
                const sampleData = {
                    coreWebVitals: {
                        lcp: 2.1,
                        fid: 85,
                        cls: 0.08,
                        fcp: 1.5
                    },
                    scores: {
                        performance: 92,
                        accessibility: 95,
                        bestPractices: 88,
                        seo: 90
                    },
                    trends: [
                        { date: '2024-01-01', performance: 89, lcp: 2.3, fid: 95 },
                        { date: '2024-01-02', performance: 91, lcp: 2.1, fid: 88 },
                        { date: '2024-01-03', performance: 92, lcp: 2.0, fid: 85 },
                        { date: '2024-01-04', performance: 90, lcp: 2.2, fid: 92 },
                        { date: '2024-01-05', performance: 93, lcp: 1.9, fid: 82 }
                    ],
                    resources: {
                        images: 45,
                        scripts: 25,
                        stylesheets: 15,
                        fonts: 10,
                        other: 5
                    },
                    alerts: [
                        {
                            metric: 'LCP',
                            value: 2.8,
                            threshold: 2.5,
                            severity: 'HIGH',
                            message: 'Largest Contentful Paint exceeds threshold'
                        }
                    ],
                    recommendations: [
                        {
                            category: 'Performance',
                            recommendation: 'Optimize images',
                            impact: 'High',
                            effort: 'Medium'
                        },
                        {
                            category: 'Performance',
                            recommendation: 'Enable compression',
                            impact: 'Medium',
                            effort: 'Low'
                        }
                    ]
                };

                this.updateDashboard(sampleData);
            }

            updateDashboard(data) {
                this.updateCoreWebVitals(data.coreWebVitals);
                this.updateScores(data.scores);
                this.updateCharts(data.trends, data.resources);
                this.updateAlerts(data.alerts);
                this.updateRecommendations(data.recommendations);
            }

            updateCoreWebVitals(vitals) {
                this.updateMetric('lcp', vitals.lcp, 's', 2.5);
                this.updateMetric('fid', vitals.fid, 'ms', 100);
                this.updateMetric('cls', vitals.cls, '', 0.1);
                this.updateMetric('fcp', vitals.fcp, 's', 1.8);
            }

            updateScores(scores) {
                this.updateScore('performance', scores.performance, 90);
                this.updateScore('accessibility', scores.accessibility, 90);
                this.updateScore('best-practices', scores.bestPractices, 90);
                this.updateScore('seo', scores.seo, 90);
            }

            updateMetric(id, value, unit, threshold) {
                const valueElement = document.getElementById(`${id}-value`);
                const statusElement = document.getElementById(`${id}-status`);
                
                valueElement.textContent = `${value}${unit}`;
                
                let status, statusClass;
                if (value <= threshold) {
                    status = 'Good';
                    statusClass = 'status-good';
                } else if (value <= threshold * 1.5) {
                    status = 'Needs Improvement';
                    statusClass = 'status-warning';
                } else {
                    status = 'Poor';
                    statusClass = 'status-danger';
                }
                
                statusElement.textContent = status;
                statusElement.className = `metric-label ${statusClass}`;
            }

            updateScore(id, value, threshold) {
                const valueElement = document.getElementById(`${id}-score`);
                const statusElement = document.getElementById(`${id}-status`);
                
                valueElement.textContent = value;
                
                let status, statusClass;
                if (value >= threshold) {
                    status = 'Good';
                    statusClass = 'status-good';
                } else if (value >= threshold * 0.8) {
                    status = 'Needs Improvement';
                    statusClass = 'status-warning';
                } else {
                    status = 'Poor';
                    statusClass = 'status-danger';
                }
                
                statusElement.textContent = status;
                statusElement.className = `metric-label ${statusClass}`;
            }

            setupCharts() {
                this.setupPerformanceChart();
                this.setupResourceChart();
                this.setupBudgetChart();
            }

            setupPerformanceChart() {
                const ctx = document.getElementById('performanceChart').getContext('2d');
                this.charts.performance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [
                            {
                                label: 'Performance Score',
                                data: [],
                                borderColor: '#667eea',
                                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'LCP (s)',
                                data: [],
                                borderColor: '#764ba2',
                                backgroundColor: 'rgba(118, 75, 162, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }

            setupResourceChart() {
                const ctx = document.getElementById('resourceChart').getContext('2d');
                this.charts.resource = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Images', 'Scripts', 'Stylesheets', 'Fonts', 'Other'],
                        datasets: [{
                            data: [45, 25, 15, 10, 5],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#f093fb',
                                '#f5576c',
                                '#4facfe'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }

            setupBudgetChart() {
                const ctx = document.getElementById('budgetChart').getContext('2d');
                this.charts.budget = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Total Size', 'Images', 'JavaScript', 'CSS', 'Fonts'],
                        datasets: [
                            {
                                label: 'Current',
                                data: [4.2, 2.1, 0.8, 0.3, 0.2],
                                backgroundColor: '#667eea'
                            },
                            {
                                label: 'Budget',
                                data: [5, 2, 1, 0.5, 0.5],
                                backgroundColor: '#dc3545'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Size (MB)'
                                }
                            }
                        }
                    }
                });
            }

            updateCharts(trends, resources) {
                if (trends) {
                    this.charts.performance.data.labels = trends.map(t => t.date);
                    this.charts.performance.data.datasets[0].data = trends.map(t => t.performance);
                    this.charts.performance.data.datasets[1].data = trends.map(t => t.lcp);
                    this.charts.performance.update();
                }

                if (resources) {
                    this.charts.resource.data.datasets[0].data = [
                        resources.images,
                        resources.scripts,
                        resources.stylesheets,
                        resources.fonts,
                        resources.other
                    ];
                    this.charts.resource.update();
                }
            }

            updateAlerts(alerts) {
                const container = document.getElementById('alerts-container');
                
                if (alerts.length === 0) {
                    container.innerHTML = '<div class="alert alert-success">No active alerts</div>';
                    return;
                }

                container.innerHTML = alerts.map(alert => `
                    <div class="alert-card">
                        <h6><i class="fas fa-exclamation-triangle"></i> ${alert.metric}</h6>
                        <p><strong>Value:</strong> ${alert.value} | <strong>Threshold:</strong> ${alert.threshold}</p>
                        <p><strong>Severity:</strong> <span class="badge bg-danger">${alert.severity}</span></p>
                        <p>${alert.message}</p>
                    </div>
                `).join('');
            }

            updateRecommendations(recommendations) {
                const container = document.getElementById('recommendations-container');
                
                if (recommendations.length === 0) {
                    container.innerHTML = '<div class="alert alert-success">No recommendations</div>';
                    return;
                }

                container.innerHTML = recommendations.map(rec => `
                    <div class="recommendation-card">
                        <h6><i class="fas fa-lightbulb"></i> ${rec.recommendation}</h6>
                        <p><strong>Category:</strong> ${rec.category}</p>
                        <p><strong>Impact:</strong> <span class="badge bg-info">${rec.impact}</span> | 
                           <strong>Effort:</strong> <span class="badge bg-warning">${rec.effort}</span></p>
                    </div>
                `).join('');
            }

            startAutoRefresh() {
                setInterval(() => {
                    this.loadData();
                }, 60000); // Refresh every minute
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new PerformanceDashboard();
        });
    </script>
</body>
</html>
